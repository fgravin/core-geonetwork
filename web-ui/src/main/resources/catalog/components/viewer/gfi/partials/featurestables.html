<div class="gn-features-table" data-ng-show="ctrl.tm.getCount() > 0">

  <div class="panel-heading">
    <button type="button" class="btn btn-default close" ng-click="ctrl.clear()" title="close">
      ×
    </button>
    <h5>
      <span class="ng-scope" data-translate="">Résultats</span>
      ({{ctrl.tm.getCount()}})
      <span></span>
    </h5>
  </div>

  <ul class="nav nav-tabs">
    <li data-ng-repeat="table in ctrl.tables"
        data-ng-class="{active: table == ctrl.currentTable}"
        ng-hide="!table.loader.isLoading() && table.loader.getCount()==0">
      <a role="tab" data-ng-click="ctrl.currentTable = table"
         title="{{::table.name}}">
        <span class="layername">{{table.name}}</span>&nbsp;
        <span ng-if="table.loader.isLoading()" class="badge">
          <i class="fa fa-spin fa-spinner"></i>
        </span>
        &nbsp;<span ng-if="!table.loader.isLoading() && table.loader.getCount() > 0" class="badge">{{table.loader.getCount()}}</span>
      </a>
    </li>
  </ul>

  <div class="tab-content" ng-repeat="table in ctrl.tables"
    data-ng-show="ctrl.currentTable == table && !table.loader.isLoading() && table.loader.getCount() > 0"
    data-ng-init="ctrl.currentTable = ctrl.tables[0]">
    <gn-features-table gn-features-table-loader="table.loader"
      gn-active="ctrl.active" gn-features-table-loader-map="ctrl.map">
    </gn-features-table>
  </div>

</div>
